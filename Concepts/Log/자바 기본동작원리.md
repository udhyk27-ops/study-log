
노트/Java
[Java] 자바 실행 구조와 가비지 컬렉션
by udhyk 2026. 2. 15.

자바는 “한 번 작성하면 어디서든 실행된다(Write Once, Run Anywhere)”는 특징을 가진 언어다.

이 특징을 가능하게 만드는 핵심 구조가 바로 JVM, JRE, JDK이다.

 
자바 프로그램이 실행되는 흐름

 

자바 프로그램은 다음과 같은 과정을 거쳐 실행된다.

 

    .java (소스 코드 작성) → javac 컴파일 → .class (바이트코드 생성) → JVM 실행 → 운영체제(OS)에서 실행

 

여기서 중요한 개념이 바로 바이트코드(Bytecode)다.

 

자바는 특정 운영체제용 기계어로 바로 컴파일되지 않는다.

대신 중간 단계 코드(바이트코드)로 변환되고,

이 바이트코드를 JVM이 해석하여 실행한다.

 

그래서 운영체제가 달라도 JVM만 있으면 실행이 가능하다.
JVM (Java Virtual Machine)

 

JVM은 자바 바이트코드를 실행하는 가상 머신이다.

운영체제 위에서 동작하는 일종의 가상 컴퓨터라고 보면 된다.

 

JVM의 역할

    바이트코드(.class) 실행
    메모리 관리
    가비지 컬렉션(GC)
    예외 처리
    보안 관리

 

JVM 내부 구조

 

JVM은 크게 세 부분으로 구성된다.

 

1. 클래스 로더 (Class Loader)

    .class 파일을 읽어 메모리에 로드
    필요한 클래스 동적 로딩

2. 실행 엔진 (Execution Engine)

    바이트코드를 해석하여 실행
    인터프리터 + JIT 컴파일러 사용

 

JIT(Just-In-Time) 컴파일러

자주 실행되는 코드를 기계어로 변환 (빠름)

 

 

3. 메모리 영역 (Runtime Data Area)

 

    메서드 영역
    힙 영역
    스택 영역
    PC 레지스터
    네이티브 메서드 스택

 

특히 힙 영역은 객체가 저장되는 공간이며,

가비지 컬렉션이 동작하는 영역이다.

 

 
JRE (Java Runtime Environment)

 

JRE는 자바 프로그램을 실행하기 위한 환경이다.

 

구성 요소:

JRE = JVM + 라이브러리

 

    JVM
    자바 표준 라이브러리(API)

 

즉, 실행만 가능하다.

개발은 불가능하다.

 

 
JDK (Java Development Kit)

 

JDK는 자바 개발 도구 모음이다.

 

구성 요소:

JDK = JRE + 개발 도구

포함되는 것:

 

    JRE
    javac (컴파일러)
    java (실행 명령어)
    javadoc
    디버깅 도구
    기타 개발 유틸리티

 

즉,

 

    실행만 → JRE
    개발 + 실행 → JDK

 

5. JVM, JRE, JDK 차이 정리
역할 	실행 엔진 	실행 환경 	개발 도구
포함 관계 	- 	JVM 포함 	JRE 포함
컴파일 가능 여부 	X 	X 	O
프로그램 실행 	O 	O 	O

 

 

 

6. 자바가 플랫폼 독립적인 이유

 

자바는 OS마다 다른 JVM이 존재한다.

 

    Windows용 JVM
    macOS용 JVM
    Linux용 JVM

 

하지만 바이트코드는 동일하다.

 

그래서,

 

“한 번 컴파일한 .class 파일은

JVM만 있으면 어디서든 실행된다.”

 

이것이 자바의 플랫폼 독립성이다.

 

 

7. 전체 구조 한눈에 정리

JDK

 └── JRE

      └── JVM

 

    JVM → 실행 담당
    JRE → 실행 환경
    JDK → 개발 도구

 

 

핵심 요약

 

    자바는 바이트코드를 생성하고 JVM이 이를 실행한다.
    JVM은 메모리 관리와 실행을 담당한다.
    JRE는 실행 환경이다.
    JDK는 개발 도구까지 포함한 패키지다.
    자바의 플랫폼 독립성은 JVM 덕분이다.

 

 

1. JVM 메모리 구조 다시 정리

 

가비지 컬렉션을 이해하려면 먼저 JVM 메모리 구조를 알아야 한다.

 

JVM의 메모리(Runtime Data Area)는 크게 다음과 같이 구성된다.

 

 

1) 메서드 영역 (Method Area)

 

    클래스 정보
    static 변수
    상수 풀

 

 

📌 2) 스택 영역 (Stack)

 

    지역 변수
    메서드 호출 정보
    스레드별로 생성됨

 

 

📌 3) 힙 영역 (Heap)

 

    객체가 저장되는 공간
    GC가 동작하는 핵심 영역

 

👉 가비지 컬렉션은 힙(Heap) 영역을 관리한다.

 

 

2. 가비지 컬렉션(GC)이란?

 

가비지 컬렉션은

 

더 이상 사용되지 않는 객체를 자동으로 제거하는 메모리 관리 방식

 

이다.

 

C/C++처럼 개발자가 직접 메모리를 해제할 필요가 없다.

자바는 JVM이 자동으로 관리한다.

 

 

3. GC가 필요한 이유

 

객체를 계속 생성하면 힙 메모리가 가득 차게 된다.

new Person();
new Person();
new Person();

참조가 사라진 객체를 정리하지 않으면

결국 OutOfMemoryError가 발생한다.

 

그래서 JVM이 주기적으로

 

“이 객체 아직 쓰고 있니?”

 

라고 검사하고,

안 쓰는 객체는 제거한다.

 

 

4. GC의 핵심 원리: Reachability (도달 가능성)

 

자바 GC는 참조 기반(Reachability) 으로 동작한다.

 

 

🔎 기준

 

객체가 GC Root에서 도달 가능하면 살아있다.

 

 

GC Root 예시

 

    스택의 지역 변수
    static 변수
    실행 중인 스레드

 

 

예시 코드

Person p = new Person();
p = null;

 

    처음엔 p가 객체를 참조 → 살아있음
    p = null → 참조 끊김
    GC 대상이 됨

 

즉,

 

참조가 끊긴 객체 = Garbage

 

 

5. 힙 메모리 구조 (세대별 관리 방식)

 

자바는 힙을 한 덩어리로 관리하지 않는다.

세대(Generation) 단위로 나누어 관리한다.

Heap
 ├─ Young Generation
 │    ├─ Eden
 │    ├─ Survivor 0
 │    └─ Survivor 1
 └─ Old Generation

 

1️⃣ Young Generation

 

    새로 생성된 객체가 저장되는 영역
    GC가 자주 발생
    Minor GC 발생

 

 

흐름

 

    객체 → Eden 저장
    살아남으면 Survivor 이동
    여러 번 살아남으면 Old 영역 이동

 

 

2️⃣ Old Generation

 

    오래 살아남은 객체 저장
    GC 빈도 낮음
    Major GC 발생

 

Major GC는 비용이 크고 성능에 영향을 준다.

 

 

6. GC 동작 과정 (Mark & Sweep)

 

GC의 기본 알고리즘은 다음과 같다.

 

 

1️⃣ Mark (표시 단계)

 

    살아있는 객체 표시

 

 

2️⃣ Sweep (제거 단계)

 

    표시되지 않은 객체 제거

 

 

추가 개념

 

 

Mark & Compact

 

    제거 후 메모리 정리 (압축)
    단편화(Fragmentation) 방지

 

 

7. Stop-The-World

 

GC가 실행될 때는

 

모든 스레드가 일시 정지된다.

 

이를 Stop-The-World라고 한다.

 

GC 시간이 길어지면

서비스 응답 속도에 영향을 준다.

 

그래서 서버 환경에서는 GC 튜닝이 중요하다.

 

 

8. 주요 GC 종류 (간단 정리)

 

 

Serial GC

 

    단일 스레드
    작은 애플리케이션에 적합

 

 

Parallel GC

 

    멀티스레드 GC
    처리량 중심

 

 

G1 GC

 

    대규모 메모리 환경
    지연 시간 최소화 목표
    현재 서버 환경에서 많이 사용

 

전체 흐름 정리

 

객체 생성 → Eden 저장
        ↓
Minor GC
        ↓
Survivor 이동
        ↓
Old 영역 이동
        ↓
Major GC
        ↓
미사용 객체 제거

 

핵심 요약

 

    GC는 힙 메모리를 자동 관리하는 시스템
    참조가 끊긴 객체가 수거 대상
    힙은 Young / Old 세대로 나뉨
    Minor GC / Major GC 존재
    GC 중에는 Stop-The-World 발생

# 가비지컬렉터 동작 원리

힙 메모리 구조 (세대별 관리 방식)
자바는 힙을 한 덩어리로 관리하지 않는다.

세대(Generation) 단위로 나누어 관리한다.

Heap
 ├─ Young Generation
 │    ├─ Eden
 │    ├─ Survivor 0
 │    └─ Survivor 1
 └─ Old Generation


1️⃣ Young Generation


    새로 생성된 객체가 저장되는 영역
    GC가 자주 발생
    Minor GC 발생



흐름


    객체 → Eden 저장
    살아남으면 Survivor 이동
    여러 번 살아남으면 Old 영역 이동



2️⃣ Old Generation


    오래 살아남은 객체 저장
    GC 빈도 낮음
    Major GC 발생


Major GC는 비용이 크고 성능에 영향을 준다.



6. GC 동작 과정 (Mark & Sweep)


GC의 기본 알고리즘은 다음과 같다.



1️⃣ Mark (표시 단계)


    살아있는 객체 표시



2️⃣ Sweep (제거 단계)


    표시되지 않은 객체 제거



추가 개념



Mark & Compact


    제거 후 메모리 정리 (압축)
    단편화(Fragmentation) 방지



7. Stop-The-World


GC가 실행될 때는


모든 스레드가 일시 정지된다.


이를 Stop-The-World라고 한다.


GC 시간이 길어지면

서비스 응답 속도에 영향을 준다.


그래서 서버 환경에서는 GC 튜닝이 중요하다.



8. 주요 GC 종류 (간단 정리)



Serial GC


    단일 스레드
    작은 애플리케이션에 적합



Parallel GC


    멀티스레드 GC
    처리량 중심



G1 GC


    대규모 메모리 환경
    지연 시간 최소화 목표
    현재 서버 환경에서 많이 사용


전체 흐름 정리


객체 생성 → Eden 저장
        ↓
Minor GC
        ↓
Survivor 이동
        ↓
Old 영역 이동
        ↓
Major GC
        ↓
미사용 객체 제거


핵심 요약


    GC는 힙 메모리를 자동 관리하는 시스템
    참조가 끊긴 객체가 수거 대상
    힙은 Young / Old 세대로 나뉨
    Minor GC / Major GC 존재
    GC 중에는 Stop-The-World 발생